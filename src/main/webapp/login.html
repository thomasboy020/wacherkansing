<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Login</title>
</head>
<body>
<form id="loginForm" method="post">

    <input name="username" id="username" type="text" placeholder="username">
    <input name="password" type="password" id="password" placeholder="password">
    <button id="login" type="submit">Login</button>
</form>
<script src="https://code.jquery.com/jquery-3.2.0.min.js"></script>
<script>
$('#login').click(function(event){
	var uri = "https://wacherkansing.herokuapp.com/restservices/authentication";
	 $.ajax(uri, {
	        type: "POST",
          data: $("#loginForm").serialize(),
	        success: function(response) {
        		var tokenAndId = JSON.parse(response);
        		window.sessionStorage.setItem("sessionToken", tokenAndId.token);
        		window.sessionStorage.setItem("id", tokenAndId.id);
            window.sessionStorage.setItem("role", tokenAndId.role);
            console.log(tokenAndId.token);
            window.location.replace("https://wacherkansing.herokuapp.com");
          },
	        error: function(response) {
            console.log("Try logging in again");
            $("#wrongLogin").html("Wrong password email combination");
	        }
	    });
    });
</script>
</body>
</html>
